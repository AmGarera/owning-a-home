
{# ==========================================================================

   render_map_points( terms )

   ==========================================================================

   Description:

   Render a list of expandable terms with definitions.

   terms:              An array of term objects. See item() for info on term
                       objects.

   ========================================================================== #}

{% macro render_map_points( terms ) %}
{% for item in terms %}
  <button class="image-map_overlay image-map_overlay__{{ item.category }}" style="{{ 'top:' + item.top + ';' 'left:' + item.left + ';' }}{{ 'width:' + item.width + ';' 'height:' + item.height + ';' if item.width and item.height }}"
     href="#{{ item.id }}">
    <span class="u-visually-hidden">{{ item.term }}</span>
 </button>
{% endfor %}
{% endmacro %}


{# ==========================================================================

   render_terms( terms )

   ==========================================================================

   Description:

   Render a list of expandable terms with definitions.

   terms:              An array of term objects. See item() for info on term
                       objects.

   ========================================================================== #}

{% macro render_terms( terms ) %}
{% for item in terms %}
  {{ term( item, loop.index ) }}
{% endfor %}
{% endmacro %}


{# ==========================================================================

   item( terms )

   ==========================================================================

   Description:

   Render an expandable term with a definition.

   item:               A term object. Term objects have the following structure:
                       { 'term': 'Term name',
                         'id': 'a-unique-html-id',
                         'definition': 'This definition can contain HTML.' }

   index:              The term's position within the array.

   ========================================================================== #}

{% macro term( item, index ) %}
  <div class="expandable expandable__padded
              expandable__form-explainer
              expandable__form-explainer-{{ item.category }}"
       id="{{ item.id }}">
    <button class="expandable_header expandable_target">
      <span class="expandable_header-left expandable_label">
          <span class="expandable_category expandable_category__{{ item.category }}">
            <span class="u-visually-hidden">{{ item.category }}</span>
          </span>
          {{ item.term }}
      </span>
      <span class="expandable_header-right expandable_link">
        <span class="expandable_cue-open">
          <span class="u-visually-hidden">Show</span>
          <span class="cf-icon cf-icon-plus"></span>
        </span>
        <span class="expandable_cue-close">
          <span class="u-visually-hidden">Hide</span>
          <span class="cf-icon cf-icon-minus"></span>
        </span>
      </span>
    </button>
    <div class="expandable_content">
      {{ item.definition|safe }}
    </div>
  </div>
{% endmacro %}
